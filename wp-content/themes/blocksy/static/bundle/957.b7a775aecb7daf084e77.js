"use strict";(globalThis.blocksyJsonP=globalThis.blocksyJsonP||[]).push([[957],{6338:function(t,e,n){n.r(e),n.d(e,{fetchVideoBy:function(){return u},mount:function(){return v}});var o=n(4705),i=n(9338),a=n(9680),r=n(6555),c=n(9948);function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach(function(e){(0,o.A)(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}const l={},u=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=d({ignoreVideoOptions:!1},e);let n=ct_localizations.ajax_url+"?action=blocksy_get_image_video_component&media="+t;return e.ignoreVideoOptions&&(n+="&ignore_video_options=true"),new Promise(function(t){(function(t){return l[t]?new Promise(function(e){e(l[t]),l[t]=l[t].clone()}):new Promise(function(e){return fetch(t).then(function(n){e(n),l[t]=n.clone()})})})(n).then(function(e){200===e.status&&e.json().then(function(e){let{success:n,data:o}=e;n&&t(o)})})})},f=function(t){t.querySelector(".ct-video-indicator").classList.add("loading");const e=t.dataset.state&&-1!==t.dataset.state.indexOf("hover")&&-1!==t.dataset.state.indexOf("revert");u(t.dataset.mediaId).then(function(n){const o=document.createElement("div");o.innerHTML=n.html;const r=o.firstChild;t.querySelector(".ct-dynamic-media-inner")?t.querySelector(".ct-dynamic-media-inner").insertAdjacentElement("beforeend",r):t.insertAdjacentElement("beforeend",r);const c=t.querySelector("video,iframe"),s=c.closest(".flexy-container[data-autoplay]"),l=null==s?void 0:s.flexy;!function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=d({onPause:function(){},onPlay:function(){},onReady:function(){}},e),t.isListeningForStateChanges||(t.isListeningForStateChanges=!0,(0,i.k7)(t,function(n){"pause"===n&&((0,i.Hl)(t),e.onPause()),"play"===n&&(e.onPlay(),(0,i.dP)(t)),"ready"===n&&e.onReady()}))}(c,{onPlay:function(){setTimeout(function(){t.querySelector(".ct-video-indicator").classList.remove("loading")},120),l&&(l.options=d(d({},l.options),{},{autoplay:!1,_autoplay:!1}))},onPause:function(){l&&(l.options=d(d({},l.options),{},{autoplay:parseInt(s.dataset.autoplay),_autoplay:parseInt(s.dataset.autoplay)}),l.state=d(d({},l.state),{},{lastTimeAnimated:(new Date).getTime()})),e&&!t.classList.contains("ct-simplified-player")&&(t.dataset.state="hover:paused")},onReady:function(){(0,a.e)()&&(0,i.jw)(c),(0,i._b)(c)}})})},m=function(t){const e=ct_localizations.dynamic_styles_selectors.find(function(t){return".ct-media-container[data-media-id], .ct-dynamic-media[data-media-id]"===t.selector});e&&(0,r.MK)(e.url).then(function(){f(t)})};ctEvents.on("blocksy:frontend:flexy:slide-change",function(t){let{instance:e,payload:n}=t;const o=(0,c.F)(e.sliderContainer);[...o.querySelectorAll("video,iframe")].map(function(t){return(0,i.WY)(t)});const a=o.children[n.currentIndex].querySelector(".ct-media-container[data-media-id], .ct-dynamic-media[data-media-id]");if(!a)return;const r=a.querySelector("video,iframe");r?(0,i.iY)(r):y(a,{performVisibilityCheck:!1})}),ctEvents.on("blocksy:ajax:filters:done",function(){[...document.querySelectorAll(".ct-media-container[data-media-id]")].map(function(t){y(t)})});const y=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e=d({performVisibilityCheck:!0},e),!t.matches('[data-state*="autoplay"]'))return;let n=!0;if(e.performVisibilityCheck&&t.closest(".flexy-items")){const e=t.getBoundingClientRect(),o=t.closest(".flexy-items").getBoundingClientRect();n=e.left>=o.left&&e.left<=o.left+o.width&&e.top>=o.top&&e.top<=o.top+o.height}n&&(t.removeAttribute("data-state"),m(t))};let p=!1;const v=function(t,e){let{event:n}=e;if(!n||"scroll"===n.type){if(p)return;p=!0;const t=function(){[...document.querySelectorAll(".ct-media-container[data-media-id], .ct-dynamic-media[data-media-id]")].map(function(t){y(t)})};return ctEvents.on("blocksy:frontend:init",function(){t()}),void t()}n&&"mouseover"===n.type&&(t.hasMouseLeaveListener||(t.hasMouseLeaveListener=!0,t.addEventListener("mouseenter",function(){const e=t.querySelector("video,iframe");(0,i._b)(e)}),-1!==t.dataset.state.indexOf("revert")&&t.addEventListener("mouseleave",function(){const e=t.querySelector("video,iframe");(0,i.WY)(e,{shouldRevert:!0})})));const o=t.querySelector("video,iframe");o?t.matches('[data-state="playing"]')?(0,i.WY)(o):(0,i._b)(o):m(t)}},9680:function(t,e,n){n.d(e,{e:function(){return o}});const o=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1)}},9948:function(t,e,n){n.d(e,{F:function(){return o}});const o=function(t){return t&&"[object Function]"==={}.toString.call(t)?t():t}}}]);