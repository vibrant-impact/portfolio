import{a as xt,S as $t,c as kt,_ as J}from"./sortBy-B8YjcpP2.js";import{S as q}from"./_Uint8Array-BxbSsmXd.js";import{e as O,m as L,r as lt,g as vt,c as D,o as C,b as h,j as z,h as N,a as E,w as et,s as j,u as U,t as v,z as It,v as Lt,L as Ot,k as dt,d as Y,y as Rt,E as Nt,q as Tt,I as ft,U as gt,F as Vt,i as jt}from"./app-CMIR6SQ7.js";import{u as Pt,_ as zt}from"./vue-contenteditable.es-Dtcp21g7.js";import{u as Kt}from"./notifier-D0ifK1Rl.js";import{a as Wt}from"./index-B-epacBB.js";function Ut(e,t,s,n){for(var i=e.length,r=s+-1;++r<i;)if(t(e[r],r,e))return r;return-1}function Yt(e){return e!==e}function Gt(e,t,s){for(var n=s-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}function Ht(e,t,s){return t===t?Gt(e,t,s):Ut(e,Yt,s)}function Qt(e,t){var s=e==null?0:e.length;return!!s&&Ht(e,t,0)>-1}function Xt(){}var Zt=1/0,Jt=q&&1/xt(new q([,-0]))[1]==Zt?function(e){return new q(e)}:Xt,qt=200;function te(e,t,s){var n=-1,i=Qt,r=e.length,a=!0,o=[],l=o;if(r>=qt){var u=Jt(e);if(u)return xt(u);a=!1,i=kt,l=new $t}else l=o;t:for(;++n<r;){var c=e[n],d=c;if(c=c!==0?c:0,a&&d===d){for(var p=l.length;p--;)if(l[p]===d)continue t;o.push(c)}else i(l,d,s)||(l!==o&&l.push(d),o.push(c))}return o}function Gs(e){return e&&e.length?te(e):[]}const ee={class:"font-item__header flex align-items:stretch {bl:1;br:0}>*+* {by:0}>*+* {b:dashed}>*+* {b:gray-30/.5}>*+*"},se={class:"flex p:12 align-items:center"},ne=["title"],ie=["title"],re=["title"],oe={key:0,class:"font-item__body {bx:0}>*+* {bt:1;bb:0}>*+* {b:solid}>*+* {b:gray-30/.5}>*+*"},ae={class:"font-item__body-meta grid grid-cols:12 align-items:stretch {bl:1;br:0}>*+* {by:0}>*+* {b:dashed}>*+* {b:gray-30/.5}>*+*"},le={class:"flex grid-col-span:2 flex:col gap:6 p:12"},ce=["for"],ue=["id"],he={class:"flex grid-col-span:4 flex:col gap:6 p:12"},de=["for"],fe=["id"],ge={class:"flex grid-col-span:4 flex:col gap:6 p:12"},pe=["for"],me=["id"],be={class:"flex grid-col-span:2 flex:col gap:6 p:12"},ye=["for"],Ae=["for"],xe=["id"],Hs={__name:"TheFontFace",props:{item:{type:Object,required:!0},preview:{type:Object,required:!0},isVariable:{type:Boolean},fontData:{type:Object}},setup(e){const t=e,s=O(!1),n=O(null),i=O(null),r=O(null);function a(){return{fontFamily:`'${t.preview.fontFamily}'`,fontSize:`${t.preview.fontSize}px`,fontWeight:t.item.weight!==0?t.item.weight:t.preview.weight.current,fontStyle:t.item.style,fontStretch:t.preview.width.current!==0?`${t.preview.width.current}%`:"100%"}}const o=L(()=>{switch(t.item.weight!==0?t.item.weight:Math.round(t.preview.weight.current/100)*100){case 100:return"Thin";case 200:return"Extra Light";case 300:return"Light";case 500:return"Medium";case 600:return"Semi Bold";case 700:return"Bold";case 800:return"Extra Bold";case 900:return"Black";case 400:default:return"Regular"}}),l=L(()=>{var u;if(t.isVariable){let c=(u=t.fontData)==null?void 0:u.axes.find(d=>d.tag==="slnt");if(c!==void 0)return`oblique ${c.max*-1}deg ${c.min*-1}deg`}return t.item.style});return(u,c)=>{const d=lt("Icon"),p=vt("ripple");return C(),D("div",{class:j([{"b:green-60":e.item.isEnabled},"font-item rel bg:white b:1|solid|gray-30/.5 {bt:1;bb:0}>*+* {bx:0}>*+* {b:solid}>*+* {b:gray-30/.5}>*+*"])},[h("div",ee,[h("div",se,[E(U(Pt),{modelValue:e.item.isEnabled,"onUpdate:modelValue":c[0]||(c[0]=g=>e.item.isEnabled=g),class:j([[e.item.isEnabled?"bg:sky-60":"opacity:.5 bg:gray-20"],"rel inline-flex p:0 h:24 w:44 flex-shrink:0 cursor:pointer rounded b:2 b:transparent transition-property:color,background-color,border-color,text-decoration-color,fill,stroke transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|2,rgb(14,165,233)|0|0|0|4,rgba(0,0,0,0)|0|0|0|0:focus outline:2|solid|transparent:focus"])},{default:et(()=>[h("span",{class:j([[e.item.isEnabled?"translateX(20)":"translateX(0)"],"pointer-events:none rel inline-block font:12 h:20 w:20 rounded bg:white transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter transition-duration:200 transition-timing-function:cubic-bezier(0.4,0,0.2,1) box-shadow:rgb(255,255,255)|0|0|0|0,rgba(59,130,246,0.5)|0|0|0|0,rgba(0,0,0,0.1)|0|1|3|0,rgba(0,0,0,0.1)|0|1|2|-1"])},[h("span",{"aria-hidden":"true",class:j([[e.item.isEnabled?"opacity:0 transition-timing-function:ease-out transition-duration:100":"opacity:1 transition-timing-function:ease-in transition-duration:200"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[E(d,{icon:"fa6-solid:xmark",class:"fg:gray-60"})],2),h("span",{"aria-hidden":"true",class:j([[e.item.isEnabled?"opacity:1 transition-timing-function:ease-in transition-duration:200":"opacity:0 transition-timing-function:ease-out transition-duration:100"],"abs inset:0 flex h:full w:full align-items:center justify-content:center tw-transition-opacity"])},[E(d,{icon:"fa6-solid:check",class:"fg:sky-60"})],2)],2)]),_:1},8,["modelValue","class"])]),h("div",{ref_key:"weightStyleTooltip",ref:n,class:"font-item__weight flex-grow:0 flex-shrink:0 flex p:12 align-items:center {ml:8}>*+*"},[e.item.weight===0?(C(),D("span",{key:0,title:o.value,class:"opacity:.7 font:14 lh:20px fg:#a7aaad px:20 py:4 r:2 b:1|solid|#dcdcde bg:#f6f7f7"},v(e.preview.weight.current),9,ne)):(C(),D("span",{key:1,title:o.value,class:"opacity:.7 font:14 lh:20px fg:#a7aaad px:20 py:4 r:2 b:1|solid|#dcdcde bg:#f6f7f7"},v(e.item.weight),9,ie)),h("span",{class:j([{italic:l.value==="italic"},"opacity:.7 font:14 lh:20px capitalize text:left fg:#a7aaad white-space:nowrap text:clip overflow:hidden px:8 py:4 w-12 r:2 b:1|solid|#dcdcde bg:#f6f7f7"]),title:l.value},v(l.value),11,re),E(J,{"target-ref":n.value,content:"Font weight & style"},null,8,["target-ref"])],512),h("div",{ref_key:"previewTextTooltip",ref:i,class:"flex:1|1|0% flex p:12 align-items:center"},[E(U(zt),{tag:"div",modelValue:e.preview.text,"onUpdate:modelValue":c[1]||(c[1]=g=>e.preview.text=g),style:It(a()),class:"preview-text lh:1.25"},null,8,["modelValue","style"]),E(J,{"target-ref":i.value,content:u.__("Editable preview text","yabe-webfont")},null,8,["target-ref","content"])],512),N((C(),D("button",{type:"button",ref_key:"editTooltip",ref:r,onClick:c[2]||(c[2]=g=>s.value=!s.value),class:"button flex align-items:center px:16 py:0.5 focus:shadow-none cursor:pointer bg:inherit b:none"},[E(d,{icon:"fa6-solid:pen-to-square",class:"h:20 w:20 fg:blue-80 fg:blue-60:hover fill:current"}),E(J,{"target-ref":r.value,content:u.__("Edit","yabe-webfont")},null,8,["target-ref","content"])])),[[p]])]),s.value?(C(),D("div",oe,[h("div",ae,[h("div",le,[h("label",{for:`display-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"Font Display",8,ce),N(h("select",{name:"display",id:`display-${e.item.id}`,"onUpdate:modelValue":c[3]||(c[3]=g=>e.item.display=g),class:"capitalize {capitalize}_option"},c[7]||(c[7]=[Ot('<option></option><option value="auto">auto</option><option value="block">block</option><option value="swap">swap</option><option value="fallback">fallback</option><option value="optional">optional</option>',6)]),8,ue),[[Lt,e.item.display]])]),h("div",he,[h("label",{for:`comment-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"Comment",8,de),N(h("input",{type:"text",name:"comment",id:`comment-${e.item.id}`,"onUpdate:modelValue":c[4]||(c[4]=g=>e.item.comment=g),placeholder:""},null,8,fe),[[dt,e.item.comment]])]),h("div",ge,[h("label",{for:`selector-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"CSS Selector",8,pe),N(h("input",{type:"text",name:"selector",id:`selector-${e.item.id}`,"onUpdate:modelValue":c[5]||(c[5]=g=>e.item.selector=g),placeholder:"h1, h2, .poetry, .haiku, p, span, #lyric, #description",autocomplete:"off"},null,8,me),[[dt,e.item.selector]])]),h("div",be,[h("label",{for:`preload-${e.item.id}`,class:"font:14 lh:20px font:semibold"},"Preload",8,ye),h("label",{for:`preload-${e.item.id}`,class:"font:14 lh:20px"},[N(h("input",{type:"checkbox",name:"preload",id:`preload-${e.item.id}`,"onUpdate:modelValue":c[6]||(c[6]=g=>e.item.preload=g)},null,8,xe),[[Rt,e.item.preload]]),c[8]||(c[8]=Y(" Preload files "))],8,Ae)])])])):z("",!0)],2)}}};function $(e){return Array.isArray?Array.isArray(e):Ct(e)==="[object Array]"}function ve(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function Ee(e){return e==null?"":ve(e)}function S(e){return typeof e=="string"}function Et(e){return typeof e=="number"}function we(e){return e===!0||e===!1||Ce(e)&&Ct(e)=="[object Boolean]"}function wt(e){return typeof e=="object"}function Ce(e){return wt(e)&&e!==null}function B(e){return e!=null}function tt(e){return!e.trim().length}function Ct(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const De="Incorrect 'index' type",Fe=e=>`Invalid value for key ${e}`,Be=e=>`Pattern length exceeds max of ${e}.`,Me=e=>`Missing ${e} property in key`,_e=e=>`Property 'weight' in key '${e}' must be a positive integer`,pt=Object.prototype.hasOwnProperty;class Se{constructor(t){this._keys=[],this._keyMap={};let s=0;t.forEach(n=>{let i=Dt(n);this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(n=>{n.weight/=s})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Dt(e){let t=null,s=null,n=null,i=1,r=null;if(S(e)||$(e))n=e,t=mt(e),s=st(e);else{if(!pt.call(e,"name"))throw new Error(Me("name"));const a=e.name;if(n=a,pt.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(_e(a));t=mt(a),s=st(a),r=e.getFn}return{path:t,id:s,weight:i,src:n,getFn:r}}function mt(e){return $(e)?e:e.split(".")}function st(e){return $(e)?e.join("."):e}function $e(e,t){let s=[],n=!1;const i=(r,a,o)=>{if(B(r))if(!a[o])s.push(r);else{let l=a[o];const u=r[l];if(!B(u))return;if(o===a.length-1&&(S(u)||Et(u)||we(u)))s.push(Ee(u));else if($(u)){n=!0;for(let c=0,d=u.length;c<d;c+=1)i(u[c],a,o+1)}else a.length&&i(u,a,o+1)}};return i(e,S(t)?t.split("."):t,0),n?s:s[0]}const ke={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},Ie={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},Le={location:0,threshold:.6,distance:100},Oe={useExtendedSearch:!1,getFn:$e,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var f={...Ie,...ke,...Le,...Oe};const Re=/[^ ]+/g;function Ne(e=1,t=3){const s=new Map,n=Math.pow(10,t);return{get(i){const r=i.match(Re).length;if(s.has(r))return s.get(r);const a=1/Math.pow(r,.5*e),o=parseFloat(Math.round(a*n)/n);return s.set(r,o),o},clear(){s.clear()}}}class ct{constructor({getFn:t=f.getFn,fieldNormWeight:s=f.fieldNormWeight}={}){this.norm=Ne(s,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((s,n)=>{this._keysMap[s.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,S(this.docs[0])?this.docs.forEach((t,s)=>{this._addString(t,s)}):this.docs.forEach((t,s)=>{this._addObject(t,s)}),this.norm.clear())}add(t){const s=this.size();S(t)?this._addString(t,s):this._addObject(t,s)}removeAt(t){this.records.splice(t,1);for(let s=t,n=this.size();s<n;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(t,s){return t[this._keysMap[s]]}size(){return this.records.length}_addString(t,s){if(!B(t)||tt(t))return;let n={v:t,i:s,n:this.norm.get(t)};this.records.push(n)}_addObject(t,s){let n={i:s,$:{}};this.keys.forEach((i,r)=>{let a=i.getFn?i.getFn(t):this.getFn(t,i.path);if(B(a)){if($(a)){let o=[];const l=[{nestedArrIndex:-1,value:a}];for(;l.length;){const{nestedArrIndex:u,value:c}=l.pop();if(B(c))if(S(c)&&!tt(c)){let d={v:c,i:u,n:this.norm.get(c)};o.push(d)}else $(c)&&c.forEach((d,p)=>{l.push({nestedArrIndex:p,value:d})})}n.$[r]=o}else if(S(a)&&!tt(a)){let o={v:a,n:this.norm.get(a)};n.$[r]=o}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Ft(e,t,{getFn:s=f.getFn,fieldNormWeight:n=f.fieldNormWeight}={}){const i=new ct({getFn:s,fieldNormWeight:n});return i.setKeys(e.map(Dt)),i.setSources(t),i.create(),i}function Te(e,{getFn:t=f.getFn,fieldNormWeight:s=f.fieldNormWeight}={}){const{keys:n,records:i}=e,r=new ct({getFn:t,fieldNormWeight:s});return r.setKeys(n),r.setIndexRecords(i),r}function W(e,{errors:t=0,currentLocation:s=0,expectedLocation:n=0,distance:i=f.distance,ignoreLocation:r=f.ignoreLocation}={}){const a=t/e.length;if(r)return a;const o=Math.abs(n-s);return i?a+o/i:o?1:a}function Ve(e=[],t=f.minMatchCharLength){let s=[],n=-1,i=-1,r=0;for(let a=e.length;r<a;r+=1){let o=e[r];o&&n===-1?n=r:!o&&n!==-1&&(i=r-1,i-n+1>=t&&s.push([n,i]),n=-1)}return e[r-1]&&r-n>=t&&s.push([n,r-1]),s}const T=32;function je(e,t,s,{location:n=f.location,distance:i=f.distance,threshold:r=f.threshold,findAllMatches:a=f.findAllMatches,minMatchCharLength:o=f.minMatchCharLength,includeMatches:l=f.includeMatches,ignoreLocation:u=f.ignoreLocation}={}){if(t.length>T)throw new Error(Be(T));const c=t.length,d=e.length,p=Math.max(0,Math.min(n,d));let g=r,y=p;const A=o>1||l,m=A?Array(d):[];let b;for(;(b=e.indexOf(t,y))>-1;){let M=W(t,{currentLocation:b,expectedLocation:p,distance:i,ignoreLocation:u});if(g=Math.min(M,g),y=b+c,A){let k=0;for(;k<c;)m[b+k]=1,k+=1}}y=-1;let F=[],w=1,x=c+d;const Q=1<<c-1;for(let M=0;M<c;M+=1){let k=0,I=x;for(;k<I;)W(t,{errors:M,currentLocation:p+I,expectedLocation:p,distance:i,ignoreLocation:u})<=g?k=I:x=I,I=Math.floor((x-k)/2+k);x=I;let ut=Math.max(1,p-I+1),Z=a?d:Math.min(p+I,d)+c,V=Array(Z+2);V[Z+1]=(1<<M)-1;for(let _=Z;_>=ut;_-=1){let K=_-1,ht=s[e.charAt(K)];if(A&&(m[K]=+!!ht),V[_]=(V[_+1]<<1|1)&ht,M&&(V[_]|=(F[_+1]|F[_])<<1|1|F[_+1]),V[_]&Q&&(w=W(t,{errors:M,currentLocation:K,expectedLocation:p,distance:i,ignoreLocation:u}),w<=g)){if(g=w,y=K,y<=p)break;ut=Math.max(1,2*p-y)}}if(W(t,{errors:M+1,currentLocation:p,expectedLocation:p,distance:i,ignoreLocation:u})>g)break;F=V}const X={isMatch:y>=0,score:Math.max(.001,w)};if(A){const M=Ve(m,o);M.length?l&&(X.indices=M):X.isMatch=!1}return X}function Pe(e){let t={};for(let s=0,n=e.length;s<n;s+=1){const i=e.charAt(s);t[i]=(t[i]||0)|1<<n-s-1}return t}const G=String.prototype.normalize?e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,""):e=>e;class Bt{constructor(t,{location:s=f.location,threshold:n=f.threshold,distance:i=f.distance,includeMatches:r=f.includeMatches,findAllMatches:a=f.findAllMatches,minMatchCharLength:o=f.minMatchCharLength,isCaseSensitive:l=f.isCaseSensitive,ignoreDiacritics:u=f.ignoreDiacritics,ignoreLocation:c=f.ignoreLocation}={}){if(this.options={location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:c},t=l?t:t.toLowerCase(),t=u?G(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const d=(g,y)=>{this.chunks.push({pattern:g,alphabet:Pe(g),startIndex:y})},p=this.pattern.length;if(p>T){let g=0;const y=p%T,A=p-y;for(;g<A;)d(this.pattern.substr(g,T),g),g+=T;if(y){const m=p-T;d(this.pattern.substr(m),m)}}else d(this.pattern,0)}searchIn(t){const{isCaseSensitive:s,ignoreDiacritics:n,includeMatches:i}=this.options;if(t=s?t:t.toLowerCase(),t=n?G(t):t,this.pattern===t){let A={isMatch:!0,score:0};return i&&(A.indices=[[0,t.length-1]]),A}const{location:r,distance:a,threshold:o,findAllMatches:l,minMatchCharLength:u,ignoreLocation:c}=this.options;let d=[],p=0,g=!1;this.chunks.forEach(({pattern:A,alphabet:m,startIndex:b})=>{const{isMatch:F,score:w,indices:x}=je(t,A,m,{location:r+b,distance:a,threshold:o,findAllMatches:l,minMatchCharLength:u,includeMatches:i,ignoreLocation:c});F&&(g=!0),p+=w,F&&x&&(d=[...d,...x])});let y={isMatch:g,score:g?p/this.chunks.length:1};return g&&i&&(y.indices=d),y}}class R{constructor(t){this.pattern=t}static isMultiMatch(t){return bt(t,this.multiRegex)}static isSingleMatch(t){return bt(t,this.singleRegex)}search(){}}function bt(e,t){const s=e.match(t);return s?s[1]:null}class ze extends R{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const s=t===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ke extends R{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const n=t.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class We extends R{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const s=t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class Ue extends R{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const s=!t.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class Ye extends R{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const s=t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class Ge extends R{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const s=!t.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,t.length-1]}}}class Mt extends R{constructor(t,{location:s=f.location,threshold:n=f.threshold,distance:i=f.distance,includeMatches:r=f.includeMatches,findAllMatches:a=f.findAllMatches,minMatchCharLength:o=f.minMatchCharLength,isCaseSensitive:l=f.isCaseSensitive,ignoreDiacritics:u=f.ignoreDiacritics,ignoreLocation:c=f.ignoreLocation}={}){super(t),this._bitapSearch=new Bt(t,{location:s,threshold:n,distance:i,includeMatches:r,findAllMatches:a,minMatchCharLength:o,isCaseSensitive:l,ignoreDiacritics:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class _t extends R{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let s=0,n;const i=[],r=this.pattern.length;for(;(n=t.indexOf(this.pattern,s))>-1;)s=n+r,i.push([n,s-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const nt=[ze,_t,We,Ue,Ge,Ye,Ke,Mt],yt=nt.length,He=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Qe="|";function Xe(e,t={}){return e.split(Qe).map(s=>{let n=s.trim().split(He).filter(r=>r&&!!r.trim()),i=[];for(let r=0,a=n.length;r<a;r+=1){const o=n[r];let l=!1,u=-1;for(;!l&&++u<yt;){const c=nt[u];let d=c.isMultiMatch(o);d&&(i.push(new c(d,t)),l=!0)}if(!l)for(u=-1;++u<yt;){const c=nt[u];let d=c.isSingleMatch(o);if(d){i.push(new c(d,t));break}}}return i})}const Ze=new Set([Mt.type,_t.type]);class Je{constructor(t,{isCaseSensitive:s=f.isCaseSensitive,ignoreDiacritics:n=f.ignoreDiacritics,includeMatches:i=f.includeMatches,minMatchCharLength:r=f.minMatchCharLength,ignoreLocation:a=f.ignoreLocation,findAllMatches:o=f.findAllMatches,location:l=f.location,threshold:u=f.threshold,distance:c=f.distance}={}){this.query=null,this.options={isCaseSensitive:s,ignoreDiacritics:n,includeMatches:i,minMatchCharLength:r,findAllMatches:o,ignoreLocation:a,location:l,threshold:u,distance:c},t=s?t:t.toLowerCase(),t=n?G(t):t,this.pattern=t,this.query=Xe(this.pattern,this.options)}static condition(t,s){return s.useExtendedSearch}searchIn(t){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i,ignoreDiacritics:r}=this.options;t=i?t:t.toLowerCase(),t=r?G(t):t;let a=0,o=[],l=0;for(let u=0,c=s.length;u<c;u+=1){const d=s[u];o.length=0,a=0;for(let p=0,g=d.length;p<g;p+=1){const y=d[p],{isMatch:A,indices:m,score:b}=y.search(t);if(A){if(a+=1,l+=b,n){const F=y.constructor.type;Ze.has(F)?o=[...o,...m]:o.push(m)}}else{l=0,a=0,o.length=0;break}}if(a){let p={isMatch:!0,score:l/a};return n&&(p.indices=o),p}}return{isMatch:!1,score:1}}}const it=[];function qe(...e){it.push(...e)}function rt(e,t){for(let s=0,n=it.length;s<n;s+=1){let i=it[s];if(i.condition(e,t))return new i(e,t)}return new Bt(e,t)}const H={AND:"$and",OR:"$or"},ot={PATH:"$path",PATTERN:"$val"},at=e=>!!(e[H.AND]||e[H.OR]),ts=e=>!!e[ot.PATH],es=e=>!$(e)&&wt(e)&&!at(e),At=e=>({[H.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function St(e,t,{auto:s=!0}={}){const n=i=>{let r=Object.keys(i);const a=ts(i);if(!a&&r.length>1&&!at(i))return n(At(i));if(es(i)){const l=a?i[ot.PATH]:r[0],u=a?i[ot.PATTERN]:i[l];if(!S(u))throw new Error(Fe(l));const c={keyId:st(l),pattern:u};return s&&(c.searcher=rt(u,t)),c}let o={children:[],operator:r[0]};return r.forEach(l=>{const u=i[l];$(u)&&u.forEach(c=>{o.children.push(n(c))})}),o};return at(e)||(e=At(e)),n(e)}function ss(e,{ignoreFieldNorm:t=f.ignoreFieldNorm}){e.forEach(s=>{let n=1;s.matches.forEach(({key:i,norm:r,score:a})=>{const o=i?i.weight:null;n*=Math.pow(a===0&&o?Number.EPSILON:a,(o||1)*(t?1:r))}),s.score=n})}function ns(e,t){const s=e.matches;t.matches=[],B(s)&&s.forEach(n=>{if(!B(n.indices)||!n.indices.length)return;const{indices:i,value:r}=n;let a={indices:i,value:r};n.key&&(a.key=n.key.src),n.idx>-1&&(a.refIndex=n.idx),t.matches.push(a)})}function is(e,t){t.score=e.score}function rs(e,t,{includeMatches:s=f.includeMatches,includeScore:n=f.includeScore}={}){const i=[];return s&&i.push(ns),n&&i.push(is),e.map(r=>{const{idx:a}=r,o={item:t[a],refIndex:a};return i.length&&i.forEach(l=>{l(r,o)}),o})}class P{constructor(t,s={},n){this.options={...f,...s},this.options.useExtendedSearch,this._keyStore=new Se(this.options.keys),this.setCollection(t,n)}setCollection(t,s){if(this._docs=t,s&&!(s instanceof ct))throw new Error(De);this._myIndex=s||Ft(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){B(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const s=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];t(r,n)&&(this.removeAt(n),n-=1,i-=1,s.push(r))}return s}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:s=-1}={}){const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:a,ignoreFieldNorm:o}=this.options;let l=S(t)?S(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return ss(l,{ignoreFieldNorm:o}),r&&l.sort(a),Et(s)&&s>-1&&(l=l.slice(0,s)),rs(l,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(t){const s=rt(t,this.options),{records:n}=this._myIndex,i=[];return n.forEach(({v:r,i:a,n:o})=>{if(!B(r))return;const{isMatch:l,score:u,indices:c}=s.searchIn(r);l&&i.push({item:r,idx:a,matches:[{score:u,value:r,norm:o,indices:c}]})}),i}_searchLogical(t){const s=St(t,this.options),n=(o,l,u)=>{if(!o.children){const{keyId:d,searcher:p}=o,g=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(l,d),searcher:p});return g&&g.length?[{idx:u,item:l,matches:g}]:[]}const c=[];for(let d=0,p=o.children.length;d<p;d+=1){const g=o.children[d],y=n(g,l,u);if(y.length)c.push(...y);else if(o.operator===H.AND)return[]}return c},i=this._myIndex.records,r={},a=[];return i.forEach(({$:o,i:l})=>{if(B(o)){let u=n(s,o,l);u.length&&(r[l]||(r[l]={idx:l,item:o,matches:[]},a.push(r[l])),u.forEach(({matches:c})=>{r[l].matches.push(...c)}))}}),a}_searchObjectList(t){const s=rt(t,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach(({$:a,i:o})=>{if(!B(a))return;let l=[];n.forEach((u,c)=>{l.push(...this._findMatches({key:u,value:a[c],searcher:s}))}),l.length&&r.push({idx:o,item:a,matches:l})}),r}_findMatches({key:t,value:s,searcher:n}){if(!B(s))return[];let i=[];if($(s))s.forEach(({v:r,i:a,n:o})=>{if(!B(r))return;const{isMatch:l,score:u,indices:c}=n.searchIn(r);l&&i.push({score:u,key:t,value:r,idx:a,norm:o,indices:c})});else{const{v:r,n:a}=s,{isMatch:o,score:l,indices:u}=n.searchIn(r);o&&i.push({score:l,key:t,value:r,norm:a,indices:u})}return i}}P.version="7.1.0";P.createIndex=Ft;P.parseIndex=Te;P.config=f;P.parseQuery=St;qe(Je);const os={class:"flex my:0 w:full"},as=["disabled"],ls=["disabled"],cs={class:"flex justify-content:space-between"},us={class:""},hs={class:"font:12 lh:16px fg:gray-60 bg:gray-10 px:4 py:0.5 rounded"},Qs={__name:"TheSearchFamily",props:{catalog:{type:Object,required:!0},modelValue:{type:Object}},emits:["update:modelValue"],setup(e,{emit:t}){const s=e,n=t,i=Kt(),r=L({get(){return s.modelValue},set(m){n("update:modelValue",m)}}),a=O(""),o=O(0),l=O(50),u=O(null),c=L(()=>[...new Set(s.catalog.map(({category:m})=>m.trim().replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase()))]),d=L(()=>{let m=s.catalog;if(a.value){let b=a.value.trim().toLowerCase();if(b.startsWith(":")){const w=b.split(" ")[0].slice(1);c.value.includes(w)&&(m=m.filter(({category:x})=>x.trim().replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase()===w)),b=b.slice(w.length+1).trim()}const F=new P(m,{keys:["family"],useExtendedSearch:!0,findAllMatches:!0});if(b.trim())return F.search(b).map(({item:w})=>w)}return m}),p=L(()=>d.value.slice(o.value,l.value+o.value)),g=L(()=>{const m=o.value+l.value;return!!d.value.slice(m,l.value+m).length}),y=L(()=>{const m=o.value-l.value;return!!d.value.slice(m,l.value+m).length});function A(m){a.value=m,o.value=0}return Nt(()=>{u.value.searchEl.focus()}),(m,b)=>{const F=lt("VueSelect"),w=vt("ripple");return C(),Tt(F,{ref_key:"vueSelectEl",ref:u,options:p.value,modelValue:r.value,"onUpdate:modelValue":b[2]||(b[2]=x=>r.value=x),label:"family",filterable:!1,loading:U(i).isBusy,autoscroll:!0,onSearch:A,onKeyup:[b[3]||(b[3]=ft(gt(x=>o.value-=l.value*y.value,["ctrl"]),["left"])),b[4]||(b[4]=ft(gt(x=>o.value+=l.value*g.value,["ctrl"]),["right"]))],placeholder:"Choose Font Family",class:"ywf-google-search-family"},{"list-footer":et(()=>[h("li",os,[N((C(),D("button",{type:"button",disabled:!y.value,onClick:b[0]||(b[0]=x=>o.value-=l.value),class:"button flex:1|1|0%"},b[5]||(b[5]=[Y(" Prev ")]),8,as)),[[w]]),N((C(),D("button",{type:"button",disabled:!g.value,onClick:b[1]||(b[1]=x=>o.value+=l.value),class:"button flex:1|1|0%"},b[6]||(b[6]=[Y(" Next ")]),8,ls)),[[w]])])]),option:et(({family:x,category:Q})=>[h("div",cs,[h("span",us,v(x),1),h("span",hs,v(Q.replace(/[^a-zA-Z0-9\-_]+/g,"-").toLowerCase()),1)])]),_:1},8,["options","modelValue","loading"])}}},ds={id:"submitdiv",class:"postbox"},fs={class:"postbox-header"},gs={class:""},ps=["href"],ms={class:"inside"},bs={class:"submitbox",id:"submitpost"},ys={id:"minor-publishing"},As={id:"misc-publishing-actions",class:"py:6"},xs={class:"misc-pub-section"},vs={class:"py:6 flex align-items:center"},Es={class:"font:medium"},ws={class:"py:6 flex align-items:center"},Cs={class:"font:medium"},Ds={class:"py:6 flex align-items:center"},Fs={class:"font:medium"},Bs={class:"py:6 flex align-items:center"},Ms=["title"],_s={class:"py:6 flex align-items:center"},Ss={key:0,class:"font:medium"},$s={class:"py:6 flex align-items:center"},ks={class:"font:medium"},Is={key:0,class:"py:6 flex flex:col"},Ls={class:"flex align-items:center"},Os={class:"table-auto border-collapse mt:6 ml:36 b:1|solid|gray-20/.4"},Rs={class:"p:6"},Ns={class:"p:6 text:right"},Ts={class:"p:6 text:right"},Vs={class:"p:6 text:right"},Xs={__name:"TheFontInfoPanel",props:{fontData:{type:Object,required:!0},fontData:{type:Object}},setup(e){return(t,s)=>{var i,r,a,o,l,u,c,d,p,g,y,A;const n=lt("Icon");return C(),D("div",null,[h("div",ds,[h("div",fs,[h("h2",gs,[s[0]||(s[0]=Y(" Font Information ")),e.fontData?(C(),D("a",{key:0,href:`https://fonts.google.com/specimen/${e.fontData.slug.replaceAll("-","+")}`,target:"_blank"},[E(n,{icon:"fa6-solid:arrow-up-right-from-square",class:"w:15 h:15"})],8,ps)):z("",!0)])]),h("div",ms,[h("div",bs,[h("div",ys,[h("div",As,[h("div",xs,[h("div",vs,[E(n,{icon:"fa6-solid:star",class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[1]||(s[1]=h("span",{class:"pl:10 pr:8"},"Rank:",-1)),h("span",Es,v((i=e.fontData)==null?void 0:i.popularity),1)]),h("div",ws,[E(n,{icon:"fa6-solid:font",class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[2]||(s[2]=h("span",{class:"pl:10 pr:8"},"Category:",-1)),h("span",Cs,v((r=e.fontData)==null?void 0:r.category),1)]),h("div",Ds,[E(n,{icon:"fa6-solid:code-pull-request",class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[3]||(s[3]=h("span",{class:"pl:10 pr:8"},"Version:",-1)),h("span",Fs,v((a=e.fontData)==null?void 0:a.version),1)]),h("div",Bs,[E(n,{icon:"fa6-solid:calendar-check",class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[4]||(s[4]=h("span",{class:"pl:10 pr:8"},"Last modified:",-1)),e.fontData?(C(),D("span",{key:0,title:(o=e.fontData)==null?void 0:o.modifiedAt,class:"font:medium"},v(U(Wt)(new Date((l=e.fontData)==null?void 0:l.modifiedAt))),9,Ms)):z("",!0)]),h("div",_s,[E(n,{icon:"fa6-solid:paintbrush",class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[5]||(s[5]=h("span",{class:"pl:10 pr:8"},"Style:",-1)),e.fontData?(C(),D("span",Ss,v(t.sprintf(t._n("%d subset","%d subsets",(u=e.fontData)==null?void 0:u.subsets.length,"yabe-webfont"),(c=e.fontData)==null?void 0:c.subsets.length))+" & "+v(t.sprintf(t._n("%d variant","%d variants",(d=e.fontData)==null?void 0:d.variants.length,"yabe-webfont"),(p=e.fontData)==null?void 0:p.variants.length)),1)):z("",!0)]),h("div",$s,[E(n,{icon:"fa6-solid:user",class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[6]||(s[6]=h("span",{class:"pl:10 pr:8"},"Designers:",-1)),h("span",ks,v((g=e.fontData)==null?void 0:g.designers),1)]),(y=e.fontData)!=null&&y.axes.length?(C(),D("div",Is,[h("div",Ls,[E(n,{icon:"fa6-solid:gear",class:"h:16 w:16 flex-shrink:0 fg:#8c8f94 fill:current"}),s[7]||(s[7]=h("span",{class:"pl:10 pr:8"},"Axis:",-1))]),h("table",Os,[s[8]||(s[8]=h("thead",null,[h("tr",{class:"text:left bg:gray-5"},[h("th",{class:"p:6 b:1|solid|gray-20/.4"},[h("a",{href:"https://fonts.google.com/variablefonts#axis-definitions",target:"_blank"}," Axes ")]),h("th",{class:"p:6 b:1|solid|gray-20/.4 text:right"},"Min"),h("th",{class:"p:6 b:1|solid|gray-20/.4 text:right"},"Max"),h("th",{class:"p:6 b:1|solid|gray-20/.4 text:right"},"Default")])],-1)),h("tbody",null,[(C(!0),D(Vt,null,jt((A=e.fontData)==null?void 0:A.axes,m=>(C(),D("tr",{key:m.tag,class:"b:1|solid|gray-20/.4"},[h("td",Rs,v(m.tag),1),h("td",Ns,v(m.min),1),h("td",Ts,v(m.max),1),h("td",Vs,v(m.defaultValue),1)]))),128))])])])):z("",!0)])]),s[9]||(s[9]=h("div",{class:"clear"},null,-1))])])])])])}}};export{Qs as _,Hs as a,Xs as b,Gs as u};
